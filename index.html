<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Section: Document Meta & Title -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- SEO Title & Description -->
  <title>STEMSphere Academy | Cinematic Math & Chemistry Tutoring for SAT, AP, IB, HKAT</title>
  <meta name="description" content="Book a demo with STEMSphere Academyâ€”cinematic tutoring in Math and Chemistry for SAT, AP, IB, and HKAT. Designed for gifted learners and exam warriors.">

 <!-- Open Graph (Social Sharing) -->
<meta property="og:title" content="STEMSphere Academy | Cinematic STEM Tutoring">
<meta property="og:description" content="Book a demo for cinematic tutoring in Math and Chemistry. Engineered for gifted learners and exam warriors.">
<meta property="og:image" content="https://learn.stemsphere.academy/assets/SSTEMSphereAcademybanner.png">
<meta property="og:url" content="https://learn.stemsphere.academy">
<meta property="og:type" content="website">

<!-- Canonical URL -->
<link rel="canonical" href="https://learn.stemsphere.academy">

<!-- Favicon -->
<link rel="icon" type="image/png" sizes="32x32" href="https://learn.stemsphere.academy/assets/favconsp1.2.png">

  <!-- Structured Data (Schema) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "EducationalOrganization",
    "name": "STEMSphere Academy",
    "url": "https://learn.stemsphere.academy",
    "description": "Cinematic tutoring in Math and Chemistry for SAT, AP, IB, and HKAT. Designed for gifted learners and exam warriors.",
    "sameAs": [
      "https://www.facebook.com/STEMxSphere"
    ],
    "address": {
      "@type": "PostalAddress",
      "streetAddress": "312 W 2nd Street #A8380",
      "addressLocality": "Casper",
      "addressRegion": "WY",
      "postalCode": "82601",
      "addressCountry": "US"
    }
  }
  </script>
<!-- Meta Pixel Code -->
<script defer>
  !function(f,b,e,v,n,t,s)
  {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
  n.callMethod.apply(n,arguments):n.queue.push(arguments)};
  if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
  n.queue=[];t=b.createElement(e);t.async=!0;
  t.src=v;s=b.getElementsByTagName(e)[0];
  s.parentNode.insertBefore(t,s)}(window, document,'script',
  'https://connect.facebook.net/en_US/fbevents.js');
  fbq('init', '571053619377842');
  fbq('track', 'PageView');
</script>
<noscript>
  <img height="1" width="1" style="display:none"
  src="https://www.facebook.com/tr?id=571053619377842&ev=PageView&noscript=1"/>
</noscript>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=AW-17612604770"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'AW-17612604770');
</script>
  
  <link href="https://assets.calendly.com/assets/external/widget.css" rel="stylesheet" />

  <style>
/* â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   ğŸ¨ BASE STYLES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Inter', 'Segoe UI', -apple-system, sans-serif;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: #fff;
  overflow-x: hidden;
  line-height: 1.6;
}

html {
  scroll-behavior: smooth;
}

/* â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   ğŸ” HEADER & NAVIGATION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” */
header {
  position: relative;
  padding: 2rem 1rem 1rem;
  text-align: center;
  background: rgba(0,0,0,0.3);
  backdrop-filter: blur(10px);
}

.brand {
  position: absolute;
  top: 1rem;
  left: 1rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  z-index: 100;
}

.brand-logo {
  width: 42px;
  height: 42px;
  background: #ff0000;
  color: #fff;
  font-weight: 700;
  font-size: 1.2em;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 6px;
  box-shadow: 0 4px 12px rgba(255,0,0,0.4);
}

.brand-text {
  color: #fff;
  font-size: 1.3em;
  font-weight: 700;
  text-shadow: 0 2px 4px rgba(0,0,0,0.3);
}

/* Language Translator */
#fallback-translator {
  position: fixed;
  top: 10px;
  right: 10px;
  background: rgba(255,255,255,0.95);
  padding: 6px 10px;
  border-radius: 6px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  z-index: 9999;
  backdrop-filter: blur(10px);
}

#fallback-translator select {
  font-size: 14px;
  padding: 5px 8px;
  border: none;
  border-radius: 4px;
  background: #fff;
  cursor: pointer;
}

/* Login Link */
.login-link {
  position: fixed;
  top: 55px;
  right: 10px;
  z-index: 9998;
  background: linear-gradient(135deg, #007bff, #0056b3);
  color: #fff;
  padding: 10px 20px;
  border-radius: 6px;
  text-decoration: none;
  font-weight: 600;
  font-size: 0.95em;
  box-shadow: 0 4px 12px rgba(0,123,255,0.4);
  transition: all 0.3s;
}

.login-link:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(0,123,255,0.6);
}

/* â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   ğŸ¬ HERO SECTION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” */
.title-group {
  margin-top: 4rem;
  animation: fadeInUp 0.8s ease-out;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.title-group span {
  display: block;
  font-size: clamp(2rem, 6vw, 4rem);
  font-weight: 800;
  letter-spacing: -1px;
  margin: 0.2em 0;
  text-shadow: 0 4px 8px rgba(0,0,0,0.3);
}

.title-group span:first-child {
  background: linear-gradient(135deg, #fff, #f0f0f0);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.title-group span:last-child {
  background: linear-gradient(135deg, #ff0000, #ff6b6b);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

h2.subtitle {
  font-size: clamp(1rem, 3vw, 1.5rem);
  color: rgba(255,255,255,0.9);
  margin: 1rem auto;
  max-width: 800px;
  font-weight: 400;
}

/* Course Bar */
.course-bar {
  display: inline-flex;
  flex-wrap: wrap;
  justify-content: center;
  align-items: center;
  padding: 0.75rem 1.5rem;
  border-radius: 50px;
  background: linear-gradient(90deg, #00f8ff, #ff00d0);
  font-weight: 700;
  font-size: clamp(0.9rem, 2.5vw, 1.2rem);
  color: #fff;
  margin: 1.5rem auto;
  box-shadow: 0 8px 20px rgba(0,248,255,0.3);
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0%, 100% {
    box-shadow: 0 8px 20px rgba(0,248,255,0.3);
  }
  50% {
    box-shadow: 0 8px 30px rgba(255,0,208,0.5);
  }
}

.course-bar span + span {
  margin-left: 0.5em;
}

/* Banner Video */
.banner-video {
  width: 100%;
  max-width: 900px;
  margin: 3rem auto;
  border-radius: 16px;
  overflow: hidden;
  box-shadow: 0 20px 60px rgba(0,0,0,0.5);
}

.banner-video video {
  width: 100%;
  height: auto;
  display: block;
}

/* â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   ğŸš€ CTA BUTTON
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” */
#highIntentCTA {
  position: relative;
  text-align: center;
  margin: 3rem auto;
  padding: 0 1rem;
}

#highIntentCTA button, #highIntentCTA a {
  display: inline-block;
  background: linear-gradient(135deg, #ff0000, #ff6b6b);
  color: #fff;
  font-size: clamp(1.1rem, 3vw, 1.5rem);
  font-weight: 800;
  padding: 1.2rem 2.5rem;
  border-radius: 12px;
  text-decoration: none;
  border: none;
  cursor: pointer;
  box-shadow: 0 10px 30px rgba(255,0,0,0.5);
  transition: all 0.3s;
  position: relative;
  z-index: 1;
  margin: 0.5rem;
}

#highIntentCTA button:hover, #highIntentCTA a:hover {
  transform: translateY(-5px);
  box-shadow: 0 15px 40px rgba(255,0,0,0.7);
}

#liveChatBtn {
  background: linear-gradient(135deg, #00ff88, #00c853) !important;
  color: #000 !important;
  box-shadow: 0 10px 30px rgba(0,255,136,0.5) !important;
}

#liveChatBtn:hover {
  box-shadow: 0 15px 40px rgba(0,255,136,0.7) !important;
}

#highIntentCTA::before {
  content: "â¬‡â¬‡â¬‡";
  position: absolute;
  top: -50px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 2rem;
  color: #fff;
  text-shadow: 0 0 10px #00c6ff;
  animation: bounce 1.5s infinite;
}

@keyframes bounce {
  0%, 100% {
    transform: translate(-50%, 0);
  }
  50% {
    transform: translate(-50%, 10px);
  }
}

/* â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   â­ REVIEWS SECTION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” */
#reviews-container {
  background: rgba(255,255,255,0.1);
  backdrop-filter: blur(10px);
  border-radius: 16px;
  padding: 2rem;
  margin: 3rem auto;
  max-width: 900px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.3);
}

#reviews-container h3 {
  font-size: 2rem;
  margin-bottom: 1rem;
  color: #FFD700;
}

#reviews-container button {
  background: none;
  border: none;
  color: #ffffff !important;
  cursor: pointer;
  font-size: 0.95em;
  text-decoration: underline;
}

#reviews-container button:hover {
  color: #00c6ff !important;
}

#reviews-body {
  background: rgba(0,0,0,0.4);
  border-radius: 12px;
  padding: 1.5rem;
  margin-top: 1rem;
}

/* â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   ğŸ“š SUBJECTS SECTION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” */
#tutoring-subjects {
  background: linear-gradient(135deg, #1a1a2e, #16213e);
  padding: 4rem 1rem;
  position: relative;
}

#tutoring-subjects h2 {
  font-size: clamp(2rem, 5vw, 3rem);
  text-align: center;
  margin-bottom: 1rem;
  background: linear-gradient(135deg, #fff, #00c6ff);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

#tutoring-subjects p.intro {
  text-align: center;
  max-width: 800px;
  margin: 0 auto 3rem;
  font-size: 1.2rem;
  color: rgba(255,255,255,0.8);
}

.tutoring-banner {
  width: 100%;
  max-width: 900px;
  display: block;
  margin: 2rem auto;
  border-radius: 16px;
  box-shadow: 0 15px 40px rgba(0,0,0,0.4);
}

.tutor-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 1.5rem;
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 1rem;
}

.tutor-subject {
  background: rgba(255,255,255,0.05);
  backdrop-filter: blur(10px);
  border: 2px solid rgba(255,255,255,0.1);
  border-radius: 16px;
  padding: 2rem;
  text-align: center;
  transition: all 0.3s;
  position: relative;
  overflow: hidden;
}

.tutor-subject::before {
  content: "";
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: radial-gradient(circle, rgba(0,198,255,0.15) 0%, transparent 70%);
  opacity: 0;
  transition: opacity 0.3s;
}

.tutor-subject:hover {
  transform: translateY(-10px);
  border-color: #00c6ff;
  box-shadow: 0 20px 40px rgba(0,198,255,0.4);
}

.tutor-subject:hover::before {
  opacity: 1;
}

.tutor-subject img {
  width: 64px;
  height: 64px;
  margin: 0 auto 1rem;
  filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3));
}

.tutor-subject h4 {
  color: #00c6ff;
  font-size: 1.3em;
  margin: 1rem 0 0.5rem;
  font-weight: 700;
}

.tutor-desc {
  color: rgba(255,255,255,0.8);
  font-size: 0.95em;
  line-height: 1.5;
}

/* â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   ğŸ¯ WHY CHOOSE US SECTION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” */
#why-choose {
  background: linear-gradient(135deg, #1a1a2e, #16213e);
  padding: 4rem 1rem;
}

#why-choose h2 {
  font-size: clamp(2rem, 5vw, 3rem);
  text-align: center;
  margin-bottom: 2rem;
  color: #fff;
}

#why-choose .highlight {
  color: #00c6ff;
  font-weight: 700;
}

#why-choose p {
  max-width: 800px;
  margin: 1.5rem auto;
  line-height: 1.8;
  font-size: 1.1rem;
  color: rgba(255,255,255,0.9);
  text-align: center;
}

#why-choose ul {
  list-style: none;
  padding: 0;
  margin: 2rem auto;
  max-width: 800px;
}

#why-choose ul li {
  position: relative;
  padding-left: 2.5em;
  margin: 1rem 0;
  color: rgba(255,255,255,0.9);
  font-size: 1.05rem;
  line-height: 1.6;
}

#why-choose ul li::before {
  content: "âœ“";
  position: absolute;
  left: 0;
  top: 0;
  color: #00ff88;
  font-size: 1.5em;
  font-weight: 700;
}

#why-choose .stat {
  text-align: center;
  font-size: clamp(1.2rem, 4vw, 1.8rem);
  margin: 3rem auto;
  padding: 2rem;
  background: rgba(0,198,255,0.1);
  border-left: 5px solid #ff0000;
  border-radius: 8px;
  max-width: 700px;
}

/* â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   ğŸ’° PRICING SECTION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” */
#pricing-section {
  background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
  padding: 4rem 1rem;
}

#pricing-section .content-wrapper {
  max-width: 1000px;
  margin: 0 auto;
  background: rgba(255,255,255,0.05);
  backdrop-filter: blur(10px);
  border: 2px solid rgba(255,215,0,0.3);
  border-radius: 20px;
  padding: 3rem 2rem;
}

#pricing-section h2 {
  font-size: clamp(2rem, 5vw, 3rem);
  text-align: center;
  margin-bottom: 2rem;
  background: linear-gradient(135deg, #FFD700, #FFA500);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

#pricing-section p {
  text-align: center;
  max-width: 800px;
  margin: 1rem auto;
  line-height: 1.8;
  color: rgba(255,255,255,0.9);
  font-size: 1.05rem;
}

#pricing-section ul {
  list-style: none;
  padding: 0;
  margin: 2rem auto;
  max-width: 700px;
}

#pricing-section ul li {
  background: rgba(255,255,255,0.05);
  backdrop-filter: blur(10px);
  border: 2px solid rgba(255,255,255,0.1);
  border-radius: 12px;
  padding: 1.5rem;
  margin: 1.5rem 0;
  position: relative;
  transition: all 0.3s;
  font-size: 1.1rem;
}

#pricing-section ul li:hover {
  transform: translateX(10px);
  border-color: #FFD700;
  box-shadow: 0 10px 30px rgba(255,215,0,0.3);
}

#pricing-section ul li.most-popular {
  border: 3px solid #FFD700;
  background: rgba(255,215,0,0.1);
  box-shadow: 0 10px 30px rgba(255,215,0,0.4);
}

#pricing-section ul li.most-popular .badge {
  position: absolute;
  top: -15px;
  left: 20px;
  background: linear-gradient(135deg, #FFD700, #FFA500);
  color: #000;
  font-weight: 800;
  font-size: 0.85em;
  padding: 5px 15px;
  border-radius: 50px;
  text-transform: uppercase;
  box-shadow: 0 4px 12px rgba(255,215,0,0.5);
}

#pricing-section .highlight {
  color: #FFD700;
  font-weight: 700;
}

#pricing-section .conversion-box {
  margin: 3rem auto 0;
  padding: 2rem;
  background: rgba(0,0,0,0.3);
  border-radius: 12px;
  max-width: 600px;
}

#oanda_ecc {
  width: 100%;
}

#oanda_ecc span {
  color: #fff;
  font-size: 0.9em;
  display: block;
  margin-bottom: 1rem;
}

/* â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   ğŸ“š EBOOK RESOURCES SECTION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” */
#ebook-resources {
  background: linear-gradient(135deg, #1a1a2e, #16213e);
  padding: 4rem 1rem;
  position: relative;
}

#ebook-resources h2 {
  font-size: clamp(2rem, 5vw, 3rem);
  text-align: center;
  margin-bottom: 1rem;
  background: linear-gradient(135deg, #FFD700, #FFA500);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

#ebook-resources p.intro {
  text-align: center;
  max-width: 800px;
  margin: 0 auto 3rem;
  font-size: 1.2rem;
  color: rgba(255,255,255,0.9);
  line-height: 1.8;
}

.ebook-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap: 2rem;
  max-width: 1000px;
  margin: 0 auto;
  padding: 0 1rem;
}

.ebook-card {
  background: rgba(255,255,255,0.05);
  backdrop-filter: blur(10px);
  border: 2px solid rgba(255,255,255,0.1);
  border-radius: 16px;
  padding: 2rem;
  text-align: center;
  transition: all 0.3s;
  position: relative;
  overflow: hidden;
}

.ebook-card:hover {
  transform: translateY(-10px);
  border-color: #00c6ff;
  box-shadow: 0 20px 40px rgba(0,198,255,0.4);
}

.ebook-card img {
  width: 100%;
  max-width: 200px;
  height: auto;
  margin: 0 auto 1.5rem;
  border-radius: 8px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.3);
}

.ebook-card h3 {
  color: #FFD700;
  font-size: 1.5rem;
  margin: 1rem 0;
  font-weight: 700;
}

.ebook-card p {
  color: rgba(255,255,255,0.8);
  font-size: 1rem;
  line-height: 1.6;
  margin-bottom: 1.5rem;
}

.ebook-card .ebook-button {
  display: inline-block;
  background: linear-gradient(135deg, #00c853, #00e676);
  color: #fff;
  padding: 0.75rem 2rem;
  border-radius: 8px;
  text-decoration: none;
  font-weight: 700;
  font-size: 1.1rem;
  transition: all 0.3s;
  box-shadow: 0 4px 12px rgba(0,200,83,0.4);
}

.ebook-card .ebook-button:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 20px rgba(0,200,83,0.6);
}

.free-badge {
  position: absolute;
  top: 15px;
  right: 15px;
  background: #ff0000;
  color: #fff;
  padding: 0.5rem 1rem;
  font-weight: 700;
  font-size: 1rem;
  border-radius: 50px;
  box-shadow: 0 4px 12px rgba(255,0,0,0.5);
  animation: pulse 2s infinite;
}

/* â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   ğŸ“ BLOG SECTION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” */
#blog {
  background: #fff;
  padding: 4rem 2rem;
}

.blog-post {
  max-width: 900px;
  margin: 0 auto 4rem;
  background: #fff;
  border-radius: 16px;
  padding: 2rem;
  box-shadow: 0 10px 30px rgba(0,0,0,0.1);
}

.blog-title {
  color: #ff0000 !important;
  font-size: clamp(1.8rem, 4vw, 2.5rem);
  margin-bottom: 1rem;
  font-weight: 800;
}

.blog-subtitle {
  color: #333;
  font-size: 1.5em;
  margin: 2rem 0 1rem;
  font-weight: 700;
}

.blog-body {
  color: #333;
  line-height: 1.8;
  font-size: 1.05rem;
  margin: 1rem 0;
}

.blog-body strong {
  color: #ff0000;
  font-weight: 600;
}

.blog-topics {
  list-style: disc;
  padding-left: 2em;
  color: #333;
  margin: 1rem 0;
}

.blog-topics li {
  margin: 0.5rem 0;
  line-height: 1.6;
}

/* â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   â“ FAQ SECTION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” */
#faq-contact {
  background: linear-gradient(135deg, #0f0c29, #302b63);
  padding: 4rem 1rem;
}

#faq-contact h3 {
  text-align: center;
  font-size: clamp(2rem, 5vw, 2.5rem);
  margin-bottom: 2rem;
  color: #fff;
}

#faq-contact details {
  margin: 1.5rem auto;
  max-width: 800px;
  background: rgba(255,255,255,0.05);
  backdrop-filter: blur(10px);
  border: 2px solid rgba(255,255,255,0.1);
  border-radius: 12px;
  padding: 1.5rem;
  transition: all 0.3s;
}

#faq-contact details:hover {
  border-color: #00c6ff;
  box-shadow: 0 10px 30px rgba(0,198,255,0.3);
}

#faq-contact summary {
  cursor: pointer;
  font-size: 1.2em;
  font-weight: 700;
  color: #00dffc;
  outline: none;
  list-style: none;
  position: relative;
  padding-right: 2rem;
}

#faq-contact summary::after {
  content: "+";
  position: absolute;
  right: 0;
  top: 0;
  font-size: 1.5em;
  color: #00dffc;
  transition: transform 0.3s;
}

#faq-contact details[open] summary::after {
  transform: rotate(45deg);
}

#faq-contact details p {
  margin: 1rem 0 0;
  line-height: 1.8;
  color: rgba(255,255,255,0.8);
  font-size: 1.05rem;
}

/* â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   ğŸ¦¶ FOOTER
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” */
footer {
  background: #000;
  color: rgba(255,255,255,0.7);
  text-align: center;
  padding: 2rem 1rem;
  font-size: 0.95em;
}

.footer-links {
  margin: 1rem 0;
}

.footer-links a,
.footer-contact a {
  color: #00dffc;
  text-decoration: none;
  margin: 0 1rem;
  transition: color 0.3s;
}

.footer-links a:hover,
.footer-contact a:hover {
  color: #fff;
  text-decoration: underline;
}

/* â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   ğŸ“± MOBILE RESPONSIVENESS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” */
@media (max-width: 768px) {
  .brand {
    position: absolute;
    top: 1rem;
    left: 1rem;
  }

  .title-group {
    margin-top: 5rem;
  }

  #highIntentCTA::before {
    top: -40px;
    font-size: 1.5rem;
  }

  .tutor-grid {
    grid-template-columns: 1fr;
    gap: 1rem;
  }

  .ebook-grid {
    grid-template-columns: 1fr;
  }

  #pricing-section .content-wrapper {
    padding: 2rem 1rem;
  }

  .blog-post {
    padding: 1.5rem;
  }

  .login-link {
    top: 60px;
    font-size: 0.85em;
    padding: 8px 15px;
  }
}

@media (max-width: 480px) {
  .brand-logo {
    width: 36px;
    height: 36px;
    font-size: 1em;
  }

  .brand-text {
    font-size: 1.1em;
  }

  #fallback-translator {
    top: 8px;
    right: 8px;
    padding: 4px 6px;
  }

  #fallback-translator select {
    font-size: 12px;
    padding: 3px 5px;
  }
}
  </style>
</head>

<body>
<!-- ğŸª COOKIE CONSENT BANNER - DESKTOP: Normal | MOBILE: Thin Bar -->
<div id="cookieConsentBanner" style="display: none; position: fixed; bottom: 0; left: 0; right: 0; background: linear-gradient(135deg, rgba(102,126,234,0.98), rgba(118,75,162,0.98)); backdrop-filter: blur(10px); color: #fff; padding: 0.75rem; z-index: 99999; box-shadow: 0 -2px 10px rgba(0,0,0,0.3); border-top: 2px solid #00ff88;">
  <div style="max-width: 1200px; margin: 0 auto; display: flex; align-items: center; justify-content: space-between; gap: 0.75rem; flex-wrap: wrap;">
    
    <!-- Cookie Icon & Text -->
    <div style="flex: 1; min-width: 250px;" id="cookieFullText">
      <div style="display: flex; align-items: center; gap: 0.5rem;">
        <div style="font-size: 1.5rem;">ğŸª</div>
        <div>
          <p style="margin: 0 0 0.25rem 0; font-weight: 700; font-size: 0.85em;">
            We Value Your Privacy
          </p>
          <p style="margin: 0; font-size: 0.75em; line-height: 1.4; opacity: 0.95;">
            We use cookies to improve your experience. By clicking "Accept", you consent to our use of cookies.
            <a href="/privacy.html" style="color: #00ff88; text-decoration: underline; font-weight: 600;">Learn more</a>
          </p>
        </div>
      </div>
    </div>

    <!-- MOBILE ONLY: Thin bar text (hidden on desktop) -->
    <div style="flex: 1; display: none;" id="cookieMobileText">
      <div style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.85em;">
        <span>ğŸª</span>
        <span style="font-weight: 600;">We use cookies</span>
      </div>
    </div>

    <!-- Buttons -->
    <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;" id="cookieButtons">
      <button onclick="acceptAllCookies()" style="background: linear-gradient(135deg, #00ff88, #00c853); color: #000; padding: 0.5rem 1.25rem; border: none; border-radius: 6px; font-weight: 700; font-size: 0.8em; cursor: pointer; box-shadow: 0 2px 8px rgba(0,255,136,0.4); transition: all 0.3s; white-space: nowrap;">
        âœ“ Accept
      </button>
      <button onclick="rejectCookies()" style="background: rgba(255,255,255,0.2); color: #fff; padding: 0.5rem 1.25rem; border: 1px solid rgba(255,255,255,0.5); border-radius: 6px; font-weight: 700; font-size: 0.8em; cursor: pointer; transition: all 0.3s; white-space: nowrap;">
        âœ— Reject
      </button>
      <button onclick="openCookieSettings()" style="background: none; color: #fff; padding: 0.5rem 1rem; border: 1px solid rgba(255,255,255,0.5); border-radius: 6px; font-weight: 600; font-size: 0.8em; cursor: pointer; transition: all 0.3s; white-space: nowrap;">
        âš™ï¸ More
      </button>
    </div>
  </div>
</div>
<!-- ğŸª COOKIE SETTINGS MODAL -->
<div id="cookieSettingsModal" style="display: none; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.85); z-index: 100000; align-items: center; justify-content: center; padding: 1rem; overflow-y: auto;">
  <div style="background: linear-gradient(135deg, #1a1a2e, #16213e); border: 3px solid #667eea; border-radius: 16px; max-width: 700px; width: 100%; max-height: 90vh; overflow-y: auto; box-shadow: 0 20px 60px rgba(0,0,0,0.5);">
    
    <!-- Header -->
    <div style="background: linear-gradient(135deg, #667eea, #764ba2); padding: 2rem; border-radius: 13px 13px 0 0; position: relative;">
      <button onclick="closeCookieSettings()" style="position: absolute; top: 1rem; right: 1rem; background: rgba(255,255,255,0.2); color: #fff; border: none; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; font-size: 1.5em; font-weight: 700; transition: all 0.3s;">Ã—</button>
      <h2 style="margin: 0 0 0.5rem 0; color: #fff; font-size: 1.8em;">ğŸª Cookie Settings</h2>
      <p style="margin: 0; color: rgba(255,255,255,0.9); font-size: 0.95em;">Manage your cookie preferences</p>
    </div>

    <!-- Cookie Categories -->
    <div style="padding: 2rem;">
      
      <!-- Essential Cookies -->
      <div style="background: rgba(255,255,255,0.05); border: 2px solid rgba(255,255,255,0.1); border-radius: 12px; padding: 1.5rem; margin-bottom: 1.5rem;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
          <h3 style="margin: 0; color: #00ff88; font-size: 1.3em;">âœ“ Essential Cookies</h3>
          <span style="background: rgba(0,255,136,0.2); color: #00ff88; padding: 0.4rem 1rem; border-radius: 20px; font-size: 0.85em; font-weight: 700;">Always Active</span>
        </div>
        <p style="margin: 0; color: rgba(255,255,255,0.8); line-height: 1.6;">
          Required for the website to function properly. These cannot be disabled.
        </p>
        <ul style="margin: 0.5rem 0 0 1.5rem; color: rgba(255,255,255,0.7); line-height: 1.8;">
          <li>User session management</li>
          <li>Security and authentication</li>
          <li>Basic site functionality</li>
          <li>Visitor analytics (for site improvement)</li>
        </ul>
      </div>

      <!-- Analytics Cookies -->
      <div style="background: rgba(255,255,255,0.05); border: 2px solid rgba(255,255,255,0.1); border-radius: 12px; padding: 1.5rem; margin-bottom: 1.5rem;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
          <h3 style="margin: 0; color: #fff; font-size: 1.3em;">ğŸ“Š Analytics Cookies</h3>
          <label style="position: relative; display: inline-block; width: 60px; height: 30px; cursor: pointer;">
            <input type="checkbox" id="analyticsCookies" checked style="opacity: 0; width: 0; height: 0;">
            <span style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: #667eea; border-radius: 30px; transition: 0.3s;" id="analyticsToggle"></span>
            <span style="position: absolute; content: ''; height: 22px; width: 22px; left: 4px; bottom: 4px; background: white; border-radius: 50%; transition: 0.3s;" id="analyticsSlider"></span>
          </label>
        </div>
        <p style="margin: 0; color: rgba(255,255,255,0.8); line-height: 1.6;">
          Help us understand how visitors interact with our website.
        </p>
        <ul style="margin: 0.5rem 0 0 1.5rem; color: rgba(255,255,255,0.7); line-height: 1.8;">
          <li>Google Analytics</li>
          <li>Detailed page view tracking</li>
          <li>Traffic source analysis</li>
        </ul>
      </div>

      <!-- Marketing Cookies -->
      <div style="background: rgba(255,255,255,0.05); border: 2px solid rgba(255,255,255,0.1); border-radius: 12px; padding: 1.5rem; margin-bottom: 1.5rem;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
          <h3 style="margin: 0; color: #fff; font-size: 1.3em;">ğŸ¯ Marketing Cookies</h3>
          <label style="position: relative; display: inline-block; width: 60px; height: 30px; cursor: pointer;">
            <input type="checkbox" id="marketingCookies" checked style="opacity: 0; width: 0; height: 0;">
            <span style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: #667eea; border-radius: 30px; transition: 0.3s;" id="marketingToggle"></span>
            <span style="position: absolute; content: ''; height: 22px; width: 22px; left: 4px; bottom: 4px; background: white; border-radius: 50%; transition: 0.3s;" id="marketingSlider"></span>
          </label>
        </div>
        <p style="margin: 0; color: rgba(255,255,255,0.8); line-height: 1.6;">
          Used to show you relevant ads on Facebook, Google, and other platforms.
        </p>
        <ul style="margin: 0.5rem 0 0 1.5rem; color: rgba(255,255,255,0.7); line-height: 1.8;">
          <li>Facebook Pixel</li>
          <li>Google Ads Remarketing</li>
          <li>Personalized advertising</li>
        </ul>
      </div>

    </div>

    <!-- Footer Buttons -->
    <div style="padding: 0 2rem 2rem; display: flex; gap: 1rem; flex-wrap: wrap;">
      <button onclick="saveCustomCookieSettings()" style="flex: 1; background: linear-gradient(135deg, #00ff88, #00c853); color: #000; padding: 1rem 2rem; border: none; border-radius: 8px; font-weight: 700; font-size: 1em; cursor: pointer; box-shadow: 0 4px 12px rgba(0,255,136,0.4);">
        ğŸ’¾ Save My Choices
      </button>
      <button onclick="acceptAllFromSettings()" style="flex: 1; background: rgba(255,255,255,0.1); color: #fff; padding: 1rem 2rem; border: 2px solid rgba(255,255,255,0.3); border-radius: 8px; font-weight: 700; font-size: 1em; cursor: pointer;">
        Accept All
      </button>
    </div>

  </div>
</div>

<!-- START: COMPACT LANGUAGE TRANSLATOR BAR -->
<div id="fallback-translator">
  <select onchange="translatePage(this.value)">
    <option value="en" selected>ğŸŒ English</option>
    <option value="es">EspaÃ±ol</option>
    <option value="fr">FranÃ§ais</option>
    <option value="de">Deutsch</option>
    <option value="zh-CN">ç®€ä½“ä¸­æ–‡</option>
    <option value="zh-TW">ç¹é«”ä¸­æ–‡</option>
    <option value="ja">æ—¥æœ¬èª</option>
    <option value="ko">í•œêµ­ì–´</option>
    <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
    <option value="hi">à¤¹à¤¿à¤¨à¥à¤¦à¥€</option>
    <option value="pt">PortuguÃªs</option>
    <option value="ru">Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
    <option value="it">Italiano</option>
    <option value="nl">Nederlands</option>
    <option value="pl">Polski</option>
    <option value="tr">TÃ¼rkÃ§e</option>
    <option value="vi">Tiáº¿ng Viá»‡t</option>
    <option value="th">à¹„à¸—à¸¢</option>
    <option value="id">Bahasa Indonesia</option>
    <option value="ms">Bahasa Melayu</option>
  </select>
</div>

<script>
  function translatePage(lang) {
    if (!lang || lang === 'en') return;
    const loc = encodeURIComponent(window.location.href);
    window.location.href =
      'https://translate.google.com/translate?sl=en&tl='
      + lang + '&u=' + loc;
  }
</script>

<!-- LOGIN LINK -->
<a href="https://learn.stemsphere.academy/login.html" class="login-link">
  ğŸ”“ Student Login/Signup
</a>

<!-- HEADER -->
<header>
  <div class="brand">
    <span class="brand-logo">SP</span>
    <span class="brand-text">STEMSphere</span>
  </div>

  <div class="title-group">
    <span>Other Courses Teach.</span>
    <span>We Transform!</span>
  </div>

  <h2 class="subtitle">Kids â†’ High School â†’ College & Adult Learners!</h2>

  <div class="course-bar">
    <span>MATH</span><span>|</span><span>Chemistry</span>
    <span>|</span><span>Biology</span><span>|</span>
    <span>Coding & more</span>
  </div>
</header>

<!-- BANNER VIDEO - OPTIMIZED WITH PRELOAD -->
<div class="banner-video">
  <video autoplay muted loop playsinline preload="auto" poster="https://learn.stemsphere.academy/assets/SSTEMSphereAcademybanner.png">
    <source src="https://learn.stemsphere.academy/assets/StemspherebannerVid29S3pt.mp4" type="video/mp4">
    Your browser does not support the video tag.
  </video>
</div>

<!-- CTA BUTTON WITH LIVE CHAT -->
<div id="highIntentCTA">
  <!-- Live Chat Button (shows when advisor available) - ABOVE RED BUTTON -->
  <div id="liveChatWrapper" style="display:none; margin-bottom: 1rem;">
    <button onclick="openAnonymousAdvisorChat()" id="liveChatBtn">
      ğŸ’¬ Chat with Advisor NOW - Free!
    </button>
  </div>
  
  <!-- Status Indicator (shows when advisor is online) -->
  <div id="advisorStatusIndicator" style="display: none; margin: 1rem auto;">
    <span style="display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.75rem 1.5rem; background: rgba(0,255,136,0.2); border: 2px solid #00ff88; border-radius: 8px; color: #fff; font-weight: 600;">
      <span style="width: 10px; height: 10px; background: #00ff88; border-radius: 50%; animation: pulse 2s infinite;"></span>
      Advisor Online Now
    </span>
  </div>
  
  <!-- Regular CTA (always visible) -->
  <a href="https://learn.stemsphere.academy/login.html">
    ğŸš€ Book Your Enrollment Session Now
  </a>
</div>

<!-- REVIEWS SECTION -->
<div id="reviews-container"></div>
<script>
// âš¡ OPTIMIZED: Cache reviews for 24 hours
(async () => {
  const CACHE_KEY = 'stemsphere_reviews_cache';
  const CACHE_DURATION = 24 * 60 * 60 * 1000; // 24 hours in milliseconds
  
  // Check if we have cached reviews
  const cachedData = localStorage.getItem(CACHE_KEY);
  let reviews = [];
  
  if (cachedData) {
    try {
      const parsed = JSON.parse(cachedData);
      const now = new Date().getTime();
      
      // If cache is still valid (less than 24 hours old)
      if (now - parsed.timestamp < CACHE_DURATION) {
        reviews = parsed.reviews;
        console.log('âœ… Using cached reviews');
      }
    } catch (e) {
      console.log('Cache parse error, will fetch fresh data');
    }
  }
  
  // If no valid cache, fetch fresh data
  if (reviews.length === 0) {
    try {
      const csvUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRSWqhCcu_XZW7SW5uZ3UZdKzvLm2zNw8DvMZV2TD_gcts6K-DBrLwd88pnXVn0xl0fxRRfGW0Y4iyN/pub?output=csv';
      const res = await fetch(csvUrl);
      const text = await res.text();
      const rows = text.trim().split('\n').slice(1).map(r =>
        r.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/).map(c => c.replace(/^"|"$/g, ''))
      );

      reviews = rows
        .filter(r => {
          const name = (r[0] || "").toLowerCase();
          const textVal = (r[1] || "").toLowerCase();
          return (
            r[2] &&
            !name.includes("facebook") &&
            !textVal.includes("facebook")
          );
        })
        .sort((a, b) => new Date(b[3]) - new Date(a[3]));
      
      // Cache the reviews
      localStorage.setItem(CACHE_KEY, JSON.stringify({
        timestamp: new Date().getTime(),
        reviews: reviews
      }));
      
      console.log('âœ… Fetched and cached fresh reviews');
    } catch (error) {
      console.error('Error fetching reviews:', error);
      return;
    }
  }

  if (!reviews.length) return;

  const formUrl = 'https://docs.google.com/forms/d/e/1FAIpQLSd0lD5dU8nsUbBzfqqRkLflTkJVrAQyvZXI81uXXyOPXpoUdA/viewform?usp=header';
  const avg = (reviews.reduce((sum, r) => sum + (parseFloat(r[2])||0), 0) / reviews.length).toFixed(1);
  const count = reviews.length;

  const wrapper = document.createElement('div');
  wrapper.innerHTML = `
    <div style="margin-bottom:0.8em;">
      <span style="background:#007bff; color:#fff; padding:0.4em 1em; border-radius:20px; font-size:0.95em; font-weight:bold; display:inline-block;">
        4/5 students improve in only 3 weeks!
      </span>
    </div>
    <h3 style="font-weight:600; margin:0.6em 0; color:#fff;">
      <span style="color:#FFD700; font-size:1.2em;">â˜…</span>
      ${avg} (${count} review${count>1?'s':''})
    </h3>
    <div style="margin:1em 0; display:flex; justify-content:center; gap:1.5em;">
      <button id="toggle-reviews" style="background:none; border:none; color:#ffffff; cursor:pointer; font-size:0.95em; text-decoration:underline;">
        See all reviews
      </button>
      <button id="submit-review" style="background:none; border:none; color:#ffffff; cursor:pointer; font-size:0.95em; text-decoration:underline;">
        Submit a review
      </button>
    </div>
    <div id="reviews-body" style="margin-top:1.2em; display:none; text-align:left;"></div>
  `;
  document.getElementById('reviews-container').appendChild(wrapper);

  const reviewsBody = wrapper.querySelector('#reviews-body');
  let currentIndex = 0;
  const batchSize = 20;

  const seeMoreBtn = document.createElement('button');
  seeMoreBtn.textContent = 'See more reviews';
  seeMoreBtn.style.cssText = "background:none; border:none; color:#ffffff; cursor:pointer; font-size:0.95em; margin-top:1em; display:block; text-decoration:underline;";
  seeMoreBtn.addEventListener('click', renderNextBatch);

  function renderNextBatch() {
    const slice = reviews.slice(currentIndex, currentIndex + batchSize);
    slice.forEach(r => {
      const reply = (r[5] || "").trim();
      const div = document.createElement('div');
      div.style.marginBottom = '1.5em';
      div.innerHTML = `
        <strong style="color:#eee;">${r[0]||'Anonymous'}</strong>
        ${'â˜…'.repeat(+r[2]).padEnd(5,'â˜†')
          .replace(/â˜…/g, '<span style="color:#FFD700;">â˜…</span>')
          .replace(/â˜†/g, '<span style="color:#555;">â˜…</span>')}<br>
        <small style="color:#aaa;">${new Date(r[3]).toLocaleDateString()}</small>
        <p style="margin:0.4em 0 0; color:#ccc; line-height:1.4;">${r[1]}</p>
        ${reply ? `
          <div style="margin-left:1em; margin-top:0.3em;">
            <div style="font-size:0.85em; color:#89c4ff; margin-bottom:0.2em; font-weight:600;">Instructor Reply:</div>
            <div style="font-size:0.85em; color:#7fbfff; font-style:italic;">${reply}</div>
          </div>` : ''}
      `;
      reviewsBody.appendChild(div);
    });
    currentIndex += batchSize;

    if (currentIndex < reviews.length) {
      if (reviewsBody.contains(seeMoreBtn)) {
        reviewsBody.removeChild(seeMoreBtn);
      }
      reviewsBody.appendChild(seeMoreBtn);
    } else {
      seeMoreBtn.remove();
    }
  }

  wrapper.querySelector('#toggle-reviews').addEventListener('click', e => {
    const show = reviewsBody.style.display === 'block';
    reviewsBody.style.display = show ? 'none' : 'block';
    e.target.textContent = show ? 'See all reviews' : 'Hide reviews';
    if (!show && currentIndex === 0) {
      renderNextBatch();
    }
  });

  wrapper.querySelector('#submit-review').addEventListener('click', ()=> window.open(formUrl, '_blank'));
})();
</script>

<!-- TUTORING SUBJECTS SECTION -->
<section id="tutoring-subjects">
  <h2>Personalized Tutoring in Every Subject We Offer</h2>
  <p class="intro">
    One-on-one or small-group sessions with our expert tutors. From weekly check-ins to intensive exam prep, we cover every level.
  </p>
  <img
    src="https://i.postimg.cc/mkZDYz4T/Ads-11.png"
    alt="Tutoring Banner"
    class="tutoring-banner"
    loading="lazy"
  />

  <div class="tutor-grid">
    <div class="tutor-subject">
      <img src="https://i.postimg.cc/43xqCpgD/9104950.png" alt="Public Speaking Icon" loading="lazy" />
      <h4>Public Speaking Foundations</h4>
      <p class="tutor-desc">Enhance your confidence and clarity.</p>
    </div>
    <div class="tutor-subject">
      <img src="https://i.postimg.cc/PxKCCzDt/Screenshot-2025-08-28-191534.png" alt="Algebra Essentials Icon" loading="lazy" />
      <h4>Algebra Essentials</h4>
      <p class="tutor-desc">From linear equations to polynomials.</p>
    </div>
    <div class="tutor-subject">
      <img src="https://i.postimg.cc/xCjCVJ4B/2792361.png" alt="Geometry Foundations Icon" loading="lazy" />
      <h4>Geometry Foundations</h4>
      <p class="tutor-desc">Master shapes, angles, and proofs.</p>
    </div>
    <div class="tutor-subject">
      <img src="https://i.postimg.cc/VvpLt7kc/Screenshot-2025-08-28-192149.png" alt="Pre-Calculus & Trig Icon" loading="lazy" />
      <h4>Pre-Calculus &amp; Trigonometry</h4>
      <p class="tutor-desc">Functions, limits, and trig insights.</p>
    </div>
    <div class="tutor-subject">
      <img src="https://i.postimg.cc/mDhsSQqZ/Screenshot-2025-08-28-191639.png" alt="AP Calculus AB & BC Icon" loading="lazy" />
      <h4>APÂ® Calculus AB &amp; BC</h4>
      <p class="tutor-desc">Intensive prep for derivatives and integrals.</p>
    </div>
    <div class="tutor-subject">
      <img src="https://i.postimg.cc/MGH6s2f8/5932783.png" alt="AP Statistics Icon" loading="lazy" />
      <h4>APÂ® Statistics</h4>
      <p class="tutor-desc">Data analysis and probability fundamentals.</p>
    </div>
    <div class="tutor-subject">
      <img src="https://i.postimg.cc/dVtw1PBT/test-tube-and-chemical-compound-chemistry-colored-icon-vector.jpg" alt="General Chemistry Icon" loading="lazy" />
      <h4>General Chemistry Crash Course</h4>
      <p class="tutor-desc">Core concepts in atoms and reactions.</p>
    </div>
    <div class="tutor-subject">
      <img src="https://i.postimg.cc/FHdhttVb/Screenshot-2025-08-28-193154.png" alt="Organic Chemistry Icon" loading="lazy" />
      <h4>Organic Chemistry Deep Dive</h4>
      <p class="tutor-desc">Mechanisms and organic compound synthesis.</p>
    </div>
    <div class="tutor-subject">
      <img src="https://i.postimg.cc/xCR2G99Q/images-1.jpg" alt="IB Chemistry SL & HL Icon" loading="lazy" />
      <h4>IB Chemistry SL &amp; HL Prep</h4>
      <p class="tutor-desc">Curriculum-focused chemistry strategies.</p>
    </div>
    <div class="tutor-subject">
      <img src="https://i.postimg.cc/RFPYVhMW/Screenshot-2025-08-28-193929.png" alt="Biology Masterclass Icon" loading="lazy" />
      <h4>Biology Masterclass</h4>
      <p class="tutor-desc">Dive into cell biology and genetics.</p>
    </div>
    <div class="tutor-subject">
      <img src="https://i.postimg.cc/FHVXX9JL/Screenshot-2025-08-28-194223.png" alt="MCAT Biology Review Icon" loading="lazy" />
      <h4>MCAT Biology Review</h4>
      <p class="tutor-desc">High-yield biology for MCAT success.</p>
    </div>
    <div class="tutor-subject">
      <img src="https://i.postimg.cc/ZRyfZcDM/Screenshot-2025-08-28-195306.png" alt="English Mastery Icon" loading="lazy" />
      <h4>English Mastery</h4>
      <p class="tutor-desc">Improve reading, writing, and speaking.</p>
    </div>
  </div>
</section>

<!-- WHY CHOOSE US SECTION -->
<section id="why-choose">
  <h2>Why <span class="highlight">STEMSphere</span> Tutoring Is Unmatched</h2>

  <p>
    At STEMSphere, every session is crafted to <span class="highlight">unlock your full potential</span>.  
    Our tutors blend deep STEM expertise with personalized teaching techniques that adapt to your style, pace, and goals.
  </p>

  <p>
    Beyond grades, we cultivate <span class="highlight">critical thinking</span>,  
    <span class="highlight">confidence</span>, and a genuine passion for learningâ€”so concepts stick for life.
  </p>

  <ul>
    <li>Tailored study plans targeting your unique challenges</li>
    <li>Hands-on exercises and real-world applications</li>
    <li>Regular progress check-ins with actionable feedback</li>
    <li>Exclusive resources: practice exams, cheat-sheets, and tutorials</li>
    <li>Flexible formats: one-on-one, small groups, or on-demand videos</li>
    <li>Certified STEM experts & exam prep specialists</li>
    <li>Encouraging, supportive environment for every learner</li>
  </ul>

  <p class="stat">
    <span class="highlight">4 out of 5 students</span> saw improvements within  
    <span class="highlight">just 3 weeks</span> of tutoring.
  </p>

  <p>
    Ready to transform your academic journey?  
    <span class="highlight">Join STEMSphere today</span> and start seeing real results.
  </p>
</section>

<!-- PRICING SECTION -->
<section id="pricing-section">
  <div class="content-wrapper">
    <h2>What Are Our Costs?</h2>

    <p>
      We offer flexible memberships designed to fit your learning style.  
      Each plan includes <span class="highlight">16 sessions over 8 weeks</span>, with classes held <span class="highlight">twice a week per subject</span>.  
      Students often stack multiple subjects to build a schedule that fits their goals and pace.
    </p>

    <ul>
      <li><span class="highlight">1-on-1 Private Tutoring</span> â€” $2000 USD per plan</li>
      <li class="most-popular">
        <div class="badge">Most Popular</div>
        <span class="highlight">Small Group (up to 4 students)</span> â€” $799 USD per plan
      </li>
    </ul>

    <h3 style="color: #00c6ff; text-align: center; font-size: clamp(1.5rem, 4vw, 2rem); margin-top: 2rem; margin-bottom: 0.5rem;">
      Need a smaller flex schedule?
    </h3>
    <p style="text-align: center; margin-bottom: 1rem;">
      For those needing less than 2 classes weekly and preferring a once-weekly pace, we offer a flexible 8-session plan.
    </p>
    <ul>
      <li>
        <span class="highlight">Flex 1-on-1 Private Tutoring (8 Sessions)</span> â€” $1100 USD per plan
      </li>
    </ul>

    <p>
      We accept payments in <span class="highlight">most global currencies</span>, including USD, EUR, GBP, NGN, INR, CAD, AUD, JPY, HKD, SGD, PHP, KRW, MYR, THB, TWD, ZAR, BRL, MXN, and more.  
      Use the converter below to estimate your local cost.
    </p>

    <div class="conversion-box">
      <div id="oanda_ecc">
        <span>Currency Converter by OANDA</span>
        <script defer src="https://www.oanda.com/embedded/converter/get/b2FuZGFlY2N1c2VyLy9kZWZhdWx0/?lang=en"></script>
      </div>
    </div>
  </div>
</section>
<!-- ============================================================
     START: KIDS REDIRECT BANNER
     ============================================================ -->
<section style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 2rem 1rem;">
  <div style="max-width: 800px; margin: 0 auto; text-align: center;">
    <a href="https://kids.stemsphere.academy" style="display: block; background: linear-gradient(135deg, #FFD700, #FFA500); padding: 2rem; border-radius: 16px; text-decoration: none; transition: all 0.3s; box-shadow: 0 10px 30px rgba(255,165,0,0.4);">
      <h3 style="font-size: clamp(1.5rem, 4vw, 2rem); color: #000; margin-bottom: 0.5rem; font-weight: 800;">
        ğŸ‘¦ğŸ»ğŸ‘§ğŸ½ğŸ‘§ğŸ‘¦ğŸ¿ Young Kids Ages 6-10?
      </h3>
      <p style="font-size: clamp(1rem, 2.5vw, 1.2rem); color: #000; margin: 0;">
        Try <strong>STEMSphere Kids</strong> â†’
      </p>
    </a>
  </div>
</section>
<!-- ============================================================
     END: KIDS REDIRECT BANNER
     ============================================================ -->
<!-- EBOOK RESOURCES SECTION -->
<section id="ebook-resources">
  <h2>ğŸ“š Free Learning Resources</h2>
  <p class="intro">
    Download our expertly crafted eBooks designed to help you excel in STEM subjects and prepare for college success.  
    These guides contain proven strategies used by top students worldwide.
  </p>

  <div class="ebook-grid">
    <div class="ebook-card">
      <div class="free-badge">FREE!</div>
      <img src="https://i.postimg.cc/s24NgxkN/gemini-2-5-flash-image-preview-nano-banana-i-need-an-ebook-cove-2.png" alt="STEM Study System eBook" loading="lazy">
      <h3>The STEM Student's Secret Study System</h3>
      <p>Master math and science with proven techniques from top students. Learn the 3-step formula for acing exams.</p>
      <a href="https://books.stemsphere.academy" class="ebook-button">Download Free</a>
    </div>

    <div class="ebook-card">
      <div class="free-badge">FREE!</div>
      <img src="https://i.postimg.cc/N03SnR7V/ergh.png" alt="College Prep Secrets eBook" loading="lazy">
      <h3>College Prep Secrets for Parents</h3>
      <p>The insider's guide to preparing your teen for college. Learn what schools don't tell you about admissions and scholarships.</p>
      <a href="https://books.stemsphere.academy" class="ebook-button">Download Free</a>
    </div>
  </div>
</section>

<!-- BLOG SECTION -->
<section id="blog">
  <article class="blog-post">
    <h2 class="blog-title">Why Immersive Chemistry Tutoring Works</h2>
    <p class="blog-body">
      At STEMSphere Academy, chemistry comes alive. Our <strong>AP Chemistry tutoring online</strong>
      sessions transform reaction mechanisms and stoichiometry into vivid, memorable lessons.
      Students in <strong>New York</strong> and <strong>California</strong> rely on us for
      <strong>organic chemistry tutoring</strong>, while families in <strong>Chicago</strong>
      trust us for exam prep that delivers results. Across <strong>Hong Kong</strong> and
      <strong>Singapore</strong>, we're known for <strong>IB Chemistry HL tutoring</strong>
      and <strong>HKDSE chemistry prep</strong> that builds confidence and clarity.
    </p>
    <p class="blog-body">
      Whether you're tackling molecular bonding or preparing for highâ€‘stakes exams, our cinematic
      approach ensures every learner feels like the hero of their own academic journey.
    </p>
    <h3 class="blog-subtitle">Topics we excel at</h3>
    <ul class="blog-topics">
      <li>AP Chemistry tutor online</li>
      <li>IB Chemistry HL tutoring in Singapore</li>
      <li>HKDSE chemistry prep Hong Kong</li>
      <li>Organic chemistry tutor New York</li>
      <li>Stoichiometry help California</li>
      <li>Chemistry exam coaching Chicago</li>
    </ul>
  </article>

  <article class="blog-post">
    <h2 class="blog-title">Why Immersive Math Tutoring Works</h2>
    <p class="blog-body">
      Math isn't just numbersâ€”it's a story. Our <strong>SAT Math help for gifted students</strong>
      and <strong>AP Calculus tutoring online</strong> sessions use cinematic clarity to make
      complex concepts unforgettable. From <strong>geometry enrichment classes in California</strong>
      to <strong>IB Math HL tutoring in New York</strong>, we engineer every lesson for results.
      Families in <strong>Chicago</strong> choose us for <strong>algebra mastery</strong>, while
      students in <strong>Hong Kong</strong> and <strong>Singapore</strong> rely on us for
      <strong>IB Math SL/HL prep</strong> and <strong>HKAT math tutoring</strong>.
    </p>
    <p class="blog-body">
      Whether it's derivatives in calculus, probability in statistics, or geometry foundations,
      STEMSphere Academy ensures every learner gains confidence, speed, and examâ€‘ready precision.
    </p>
    <h3 class="blog-subtitle">Topics we excel at</h3>
    <ul class="blog-topics">
      <li>SAT Math help for gifted students</li>
      <li>AP Calculus tutor online</li>
      <li>IB Math HL tutoring New York</li>
      <li>Geometry enrichment classes California</li>
      <li>Algebra tutor Chicago</li>
      <li>HKAT math tutoring Hong Kong</li>
      <li>IB Math SL/HL prep Singapore</li>
    </ul>
  </article>

  <article class="blog-post">
    <h2 class="blog-title">Master Physics Through Motion, Energy, and Real-World Application</h2>
    <p class="blog-body">
      Physics is the language of the universeâ€”and at STEMSphere Academy, we decode it together. 
      Our <strong>AP Physics tutoring online</strong> doesn't just teach formulas; we build 
      intuition through hands-on problem-solving and visual demonstrations that make abstract 
      concepts click. From projectile motion to electromagnetic fields, every lesson connects 
      theory to the world around you.
    </p>
    <p class="blog-body">
      Students across <strong>New York</strong>, <strong>California</strong>, and <strong>Texas</strong> 
      choose us for <strong>AP Physics C exam mastery</strong>, while learners in <strong>Hong Kong</strong> 
      and <strong>Singapore</strong> excel with our <strong>IB Physics HL preparation</strong>. We specialize 
      in breaking down complex topicsâ€”kinematics, thermodynamics, quantum mechanicsâ€”into step-by-step strategies 
      that build confidence and exam-ready skills.
    </p>
    <p class="blog-body">
      Whether you're struggling with circuits, acing mechanics, or preparing for university-level physics, 
      our tutors adapt to your learning style. We use real-world examples, interactive simulations, and 
      practice problems that mirror actual AP and IB exams. The result? Students who don't just passâ€”they thrive.
    </p>
    <h3 class="blog-subtitle">Physics tutoring expertise</h3>
    <ul class="blog-topics">
      <li>AP Physics 1 and 2 tutoring online</li>
      <li>AP Physics C (Mechanics & Electricity & Magnetism) prep</li>
      <li>IB Physics HL and SL exam preparation Singapore</li>
      <li>A-Level physics tutoring Hong Kong</li>
      <li>HKDSE Physics exam coaching</li>
      <li>College physics for engineering students California</li>
      <li>Mechanics and electromagnetism help Texas</li>
      <li>University physics tutoring New York</li>
    </ul>
  </article>
</section>

<!-- FAQ & CONTACT SECTION -->
<section id="faq-contact">
  <h3>Frequently Asked Questions</h3>

  <details>
    <summary>How do I book a free session?</summary>
    <p>It's not a free trial but more of a free diagnostics. We offer a free diagnostics/mini session with one of our enrollment specialists. The goal is to match you with a tutor that fits your learning style. Click the "Book Your Enrollment Session" button above or reach out via email. We'll schedule your session within 24 hours.</p>
  </details>

  <details>
    <summary>What subjects and levels do you cover?</summary>
    <p>We offer personalized tutoring in Math, Chemistry, Biology, Coding, English, Public Speaking, SAT/ACT prep, and moreâ€”from elementary through adult learners.</p>
  </details>

  <details>
    <summary>What's your cancellation and rescheduling policy?</summary>
    <p>You can cancel or reschedule up to 24 hours before your session at no extra cost. Simply reply to your session confirmation email or contact support.</p>
  </details>

  <details>
    <summary>How do I pay and what are your rates?</summary>
    <p>We accept all major credit cards and PayPal. Rates vary by tutor and format; view detailed pricing above or email support for a custom package.</p>
  </details>

  <details>
    <summary>Do you offer group discounts?</summary>
    <p>Yes! Our Small Group (up to 4 students) plan is our most popular option at $799 USD. It's perfect for friends or siblings learning together.</p>
  </details>

  <details>
    <summary>What if I need to learn multiple subjects?</summary>
    <p>Students often stack multiple subjects! Each membership covers one subject, but you can purchase multiple plans to create a custom schedule that fits your goals.</p>
  </details>

  <details>
    <summary>Are the eBooks really free?</summary>
    <p>Yes! Both eBooks are 100% free. No credit card required. Just enter your email and download instantly. We created these resources to help students succeed.</p>
  </details>
</section>

<!-- FOOTER -->
<footer>
  <p>Â© 2025 STEMSphere Academy. All rights reserved.</p>
  <nav class="footer-links">
    <a href="#faq-contact">FAQs</a> |
    <a href="/privacy.html">Privacy Policy</a> |
    <a href="https://www.facebook.com/STEMxSphere" target="_blank">Facebook</a>
  </nav>
  <p class="footer-contact">
    Need help? Contact us at 
    <a href="mailto:support@stemsphere.academy">support@stemsphere.academy</a>
  </p>
  <p style="margin-top: 1rem; font-size: 0.85em; opacity: 0.6;">
    312 W 2nd Street #A8380, Casper, WY 82601, USA
  </p>
</footer>

<!-- ğŸŸ¢ ANONYMOUS ADVISOR CHAT MODAL (GREEN THEME) -->
<div id="anonymousAdvisorChatModal" style="display: none; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.8); z-index: 9999; align-items: center; justify-content: center;">
  <div style="background: #fff; border-radius: 16px; width: 90%; max-width: 700px; max-height: 90vh; display: flex; flex-direction: column; box-shadow: 0 20px 60px rgba(0,0,0,0.5);">
    
    <!-- Header with Customer Service Team Stack (GREEN) -->
    <div style="background: linear-gradient(135deg, #00ff88, #00c853); color: #000; padding: 1.5rem 2rem; border-radius: 16px 16px 0 0; position: relative;">
      <button onclick="closeAnonymousChat()" style="position: absolute; top: 1rem; right: 1rem; background: rgba(0,0,0,0.2); color: #000; border: none; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; font-size: 1.5em; font-weight: 700; display: flex; align-items: center; justify-content: center; transition: all 0.3s;">Ã—</button>
      
      <div style="display: flex; align-items: center; gap: 1rem;">
        <!-- Stacked Customer Service Team Avatars -->
        <div style="position: relative; width: 180px; height: 100px;">
          <img src="https://i.postimg.cc/mrbw5b7S/Tutor1.png" alt="Support Team" style="position: absolute; top: 0; left: 0; width: 70px; height: 70px; border-radius: 50%; border: 3px solid #fff; object-fit: cover; box-shadow: 0 4px 12px rgba(0,0,0,0.3); z-index: 4;" loading="lazy">
          <img src="https://i.postimg.cc/bvzTBz19/Tutor2.png" alt="Support Team" style="position: absolute; top: 0; left: 40px; width: 70px; height: 70px; border-radius: 50%; border: 3px solid #fff; object-fit: cover; box-shadow: 0 4px 12px rgba(0,0,0,0.3); z-index: 3;" loading="lazy">
          <img src="https://i.postimg.cc/JzgXbMPk/In-Shot-20250221-181740954.jpg" alt="Support Team" style="position: absolute; top: 0; left: 80px; width: 70px; height: 70px; border-radius: 50%; border: 3px solid #fff; object-fit: cover; box-shadow: 0 4px 12px rgba(0,0,0,0.3); z-index: 2;" loading="lazy">
          <img src="https://i.postimg.cc/jjsXFsy6/Tutor3.png" alt="Support Team" style="position: absolute; top: 0; left: 120px; width: 70px; height: 70px; border-radius: 50%; border: 3px solid #fff; object-fit: cover; box-shadow: 0 4px 12px rgba(0,0,0,0.3); z-index: 1;" loading="lazy">
        </div>
        <div style="flex: 1;">
          <h3 style="margin: 0 0 0.5rem 0; font-size: 1.6em; font-weight: 800;">ğŸ’¬ Live Chat with Our Team</h3>
          <p style="margin: 0 0 0.5rem 0; font-size: 1.1em; font-weight: 600;">Customer Support Available</p>
          <p style="margin: 0; font-size: 0.9em; opacity: 0.8;">Our advisors are here to help!</p>
        </div>
      </div>
    </div>

    <!-- Messages Container -->
    <div id="anonymousChatMessages" style="flex: 1; overflow-y: auto; padding: 1.5rem; background: #f8f9fa; min-height: 300px; max-height: 400px;">
      <div style="text-align: center; padding: 2rem; color: #999;">
        <div style="font-size: 3em; margin-bottom: 1rem;">ğŸ’¬</div>
        <p style="font-size: 1.1em; color: #666;">Login or sign up to start chatting!</p>
      </div>
    </div>

    <!-- Input Box -->
    <div style="padding: 1.5rem; background: #fff; border-top: 2px solid #eee; border-radius: 0 0 16px 16px;">
      <textarea id="anonymousChatInput" placeholder="Ask about courses, pricing, schedules..." style="width: 100%; padding: 1rem; border: 2px solid #ddd; border-radius: 8px; font-size: 1em; font-family: inherit; resize: vertical; min-height: 80px; margin-bottom: 1rem; background: #f5f5f5; color: #999; cursor: not-allowed;" disabled readonly></textarea>
      <button onclick="redirectToLogin()" style="width: 100%; background: linear-gradient(135deg, #007bff, #0056b3); color: #fff; padding: 1rem; border: none; border-radius: 8px; font-size: 1.1em; font-weight: 700; cursor: pointer; transition: all 0.3s;">
        ğŸ”“ Login/Signup to Chat with Advisor
      </button>
      <p style="margin: 1rem 0 0 0; text-align: center; color: #666; font-size: 0.9em;">
        ğŸ’¡ Create a free account to start chatting instantly!
      </p>
    </div>
  </div>
</div>

<!-- SUPABASE & CHAT JAVASCRIPT -->
<script defer src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
// âš¡ PERFORMANCE: All non-critical JS delayed
window.addEventListener('load', function() {
  
// Supabase setup
const SUPABASE_URL = 'https://horqtcwnhwgodwlyqhli.supabase.co';
const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhvcnF0Y3duaHdnb2R3bHlxaGxpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk3NjAyNzEsImV4cCI6MjA3NTMzNjI3MX0.4rYzW6MFEkVVqLor55RuFGLwE6WBJrYLxvYbgeXXRGU';

const { createClient } = supabase;
const supabaseClient = createClient(SUPABASE_URL, SUPABASE_KEY);

let currentAdvisorId = null;
let currentAdvisorData = null;

// Check if advisors are available
async function checkAdvisorAvailability() {
  try {
    const { data: advisors, error } = await supabaseClient
      .from('profiles')
      .select('id, full_name, profile_photo_url, bio, years_experience, education, fun_fact, teaching_video_url')
      .eq('role', 'teacher')
      .eq('is_advisor', true)
      .eq('advisor_available', true)
      .limit(1);

    if (error) {
      console.error('Error fetching advisors:', error);
      return;
    }

    const chatWrapper = document.getElementById('liveChatWrapper');
    const statusIndicator = document.getElementById('advisorStatusIndicator');
    
    if (advisors && advisors.length > 0) {
      currentAdvisorData = advisors[0];
      if (chatWrapper) chatWrapper.style.display = 'block';
      if (statusIndicator) statusIndicator.style.display = 'block';
    } else {
      if (chatWrapper) chatWrapper.style.display = 'none';
      if (statusIndicator) statusIndicator.style.display = 'none';
    }
  } catch (err) {
    console.error('Exception in checkAdvisorAvailability:', err);
  }
}

// Open anonymous chat modal
window.openAnonymousAdvisorChat = async function() {
  const { data: advisors } = await supabaseClient
    .from('profiles')
    .select('id, full_name, profile_photo_url, bio, years_experience, education, fun_fact, teaching_video_url')
    .eq('role', 'teacher')
    .eq('is_advisor', true)
    .eq('advisor_available', true)
    .limit(1);

  if (!advisors || advisors.length === 0) {
    alert('âš ï¸ No advisors available right now. Please sign up or try again later!\n\nCreate an account: ' + window.location.origin + '/login.html');
    return;
  }

  currentAdvisorId = advisors[0].id;
  currentAdvisorData = advisors[0];
  document.getElementById('anonymousAdvisorChatModal').style.display = 'flex';
  
  const container = document.getElementById('anonymousChatMessages');
  container.innerHTML = `
    <div style="text-align: center; padding: 2rem; color: #999;">
      <div style="font-size: 3em; margin-bottom: 1rem;">ğŸ’¬</div>
      <p style="font-size: 1.1em; color: #666;">Login or sign up to start chatting with our team!</p>
    </div>
  `;
}

window.redirectToLogin = function() {
  window.location.href = 'https://learn.stemsphere.academy/login.html';
}

window.closeAnonymousChat = function() {
  document.getElementById('anonymousAdvisorChatModal').style.display = 'none';
}

// Run check immediately
checkAdvisorAvailability();
setInterval(checkAdvisorAvailability, 5000);

// ==================== COOKIE CONSENT MANAGEMENT ====================

function adjustCookieBannerForMobile() {
  const isMobile = window.innerWidth <= 768;
  const banner = document.getElementById('cookieConsentBanner');
  const fullText = document.getElementById('cookieFullText');
  const mobileText = document.getElementById('cookieMobileText');
  const buttons = document.getElementById('cookieButtons');
  
  if (isMobile) {
    banner.style.padding = '0.5rem 0.75rem';
    fullText.style.display = 'none';
    mobileText.style.display = 'block';
    buttons.querySelectorAll('button').forEach(btn => {
      btn.style.padding = '0.4rem 0.8rem';
      btn.style.fontSize = '0.75em';
    });
  } else {
    banner.style.padding = '0.75rem';
    fullText.style.display = 'block';
    mobileText.style.display = 'none';
    buttons.querySelectorAll('button').forEach((btn, idx) => {
      if (idx === 0 || idx === 1) {
        btn.style.padding = '0.5rem 1.25rem';
      } else {
        btn.style.padding = '0.5rem 1rem';
      }
      btn.style.fontSize = '0.8em';
    });
  }
}

document.getElementById('analyticsCookies').addEventListener('change', function() {
  const toggle = document.getElementById('analyticsToggle');
  const slider = document.getElementById('analyticsSlider');
  if (this.checked) {
    toggle.style.background = '#667eea';
    slider.style.transform = 'translateX(30px)';
  } else {
    toggle.style.background = '#ccc';
    slider.style.transform = 'translateX(0)';
  }
});

document.getElementById('marketingCookies').addEventListener('change', function() {
  const toggle = document.getElementById('marketingToggle');
  const slider = document.getElementById('marketingSlider');
  if (this.checked) {
    toggle.style.background = '#667eea';
    slider.style.transform = 'translateX(30px)';
  } else {
    toggle.style.background = '#ccc';
    slider.style.transform = 'translateX(0)';
  }
});

const analyticsSlider = document.getElementById('analyticsSlider');
const marketingSlider = document.getElementById('marketingSlider');
if (analyticsSlider) analyticsSlider.style.transform = 'translateX(30px)';
if (marketingSlider) marketingSlider.style.transform = 'translateX(30px)';

function checkCookieConsent() {
  const consent = localStorage.getItem('cookieConsent');
  if (!consent) {
    const isMobile = window.innerWidth <= 768;
    const delay = isMobile ? 10000 : 1000;
    setTimeout(() => {
      adjustCookieBannerForMobile();
      document.getElementById('cookieConsentBanner').style.display = 'block';
    }, delay);
  } else {
    const consentData = JSON.parse(consent);
    if (consentData.analytics) enableAnalytics();
    if (consentData.marketing) enableMarketing();
  }
}

window.addEventListener('resize', () => {
  const banner = document.getElementById('cookieConsentBanner');
  if (banner.style.display === 'block') {
    adjustCookieBannerForMobile();
  }
});

window.acceptAllCookies = function() {
  const consent = {
    essential: true,
    analytics: true,
    marketing: true,
    timestamp: new Date().toISOString()
  };
  localStorage.setItem('cookieConsent', JSON.stringify(consent));
  document.getElementById('cookieConsentBanner').style.display = 'none';
  enableAnalytics();
  enableMarketing();
  console.log('âœ… All cookies accepted');
}

window.rejectCookies = function() {
  const consent = {
    essential: true,
    analytics: false,
    marketing: false,
    timestamp: new Date().toISOString()
  };
  localStorage.setItem('cookieConsent', JSON.stringify(consent));
  document.getElementById('cookieConsentBanner').style.display = 'none';
  console.log('âŒ Optional cookies rejected');
}

window.openCookieSettings = function() {
  document.getElementById('cookieConsentBanner').style.display = 'none';
  document.getElementById('cookieSettingsModal').style.display = 'flex';
}

window.closeCookieSettings = function() {
  document.getElementById('cookieSettingsModal').style.display = 'none';
  if (!localStorage.getItem('cookieConsent')) {
    adjustCookieBannerForMobile();
    document.getElementById('cookieConsentBanner').style.display = 'block';
  }
}

window.saveCustomCookieSettings = function() {
  const analytics = document.getElementById('analyticsCookies').checked;
  const marketing = document.getElementById('marketingCookies').checked;
  
  const consent = {
    essential: true,
    analytics: analytics,
    marketing: marketing,
    timestamp: new Date().toISOString()
  };
  
  localStorage.setItem('cookieConsent', JSON.stringify(consent));
  document.getElementById('cookieSettingsModal').style.display = 'none';
  
  if (analytics) enableAnalytics();
  if (marketing) enableMarketing();
  
  console.log('âœ… Custom cookie preferences saved:', consent);
}

window.acceptAllFromSettings = function() {
  document.getElementById('analyticsCookies').checked = true;
  document.getElementById('marketingCookies').checked = true;
  
  document.getElementById('analyticsToggle').style.background = '#667eea';
  document.getElementById('analyticsSlider').style.transform = 'translateX(30px)';
  document.getElementById('marketingToggle').style.background = '#667eea';
  document.getElementById('marketingSlider').style.transform = 'translateX(30px)';
  
  saveCustomCookieSettings();
}

function enableAnalytics() {
  console.log('ğŸ“Š Analytics tracking enabled');
}

function enableMarketing() {
  console.log('ğŸ¯ Marketing tracking enabled');
}

// ==================== LIVE VISITOR TRACKING (DELAYED 30 SECONDS) ====================
setTimeout(function() {
  (async function() {
    let visitorId = localStorage.getItem('visitor_id');
    if (!visitorId) {
      visitorId = 'visitor_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
      localStorage.setItem('visitor_id', visitorId);
    }

    async function trackVisitor() {
      try {
        let locationData = { country: 'Unknown', city: 'Unknown', ip: 'Unknown' };
        try {
          const response = await fetch('https://ipapi.co/json/');
          if (response.ok) {
            locationData = await response.json();
          }
        } catch (e) {
          console.log('Location lookup failed (non-critical)');
        }

        const visitorData = {
          visitor_id: visitorId,
          page_url: window.location.href,
          ip_address: locationData.ip || 'Unknown',
          city: locationData.city || null,
          country: locationData.country_name || locationData.country || null,
          last_seen: new Date().toISOString()
        };

        const { error } = await supabaseClient
          .from('live_visitors')
          .upsert(visitorData, { 
            onConflict: 'visitor_id',
            ignoreDuplicates: false 
          });

        if (error) {
          console.error('Visitor tracking error:', error);
        }
      } catch (err) {
        console.error('Tracking failed:', err);
      }
    }

    await trackVisitor();
    setInterval(trackVisitor, 30000);

    window.addEventListener('beforeunload', () => {
      navigator.sendBeacon(
        `${SUPABASE_URL}/rest/v1/live_visitors?visitor_id=eq.${visitorId}`,
        JSON.stringify({ last_seen: new Date().toISOString() })
      );
    });
  })();
}, 30000); // âš¡ DELAYED 30 SECONDS

checkCookieConsent();

}); // End of window.load
</script>

</body>
</html>
